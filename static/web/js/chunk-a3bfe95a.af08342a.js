(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3bfe95a"],{"0636":function(e,t,a){e.exports=a.p+"static/web/img/receive-task.cc591ea8.svg"},"081c":function(e,t,a){"use strict";a("f187")},"1bb8":function(e,t,a){e.exports=a.p+"static/web/img/user-task.24460b5b.svg"},"2a9f4":function(e,t,a){e.exports=a.p+"static/web/img/parallel-gateway.739418c1.svg"},"2f27":function(e,t,a){e.exports=a.p+"static/web/img/exclusive-gateway.7eb1f01e.svg"},3621:function(e,t,a){},"438b":function(e,t,a){"use strict";a("c42e")},"951a":function(e,t,a){"use strict";a("fa7b")},"96a7":function(e,t,a){},"974b":function(e,t,a){e.exports=a.p+"static/web/img/end.902a1416.svg"},a0f5:function(e,t,a){"use strict";a("3621")},bd84:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"root"},[e.isView?e._e():t("ToolbarPanel",{ref:"toolbar"}),e._v(" "),t("div",{staticStyle:{display:"flex"}},[e.isView?e._e():t("ItemPanel",{ref:"addItemPanel",attrs:{height:e.height}}),e._v(" "),t("div",{ref:"canvas",staticClass:"canvasPanel",style:{height:e.height+"px",width:e.isView?"100%":"70%","border-bottom":e.isView?0:null}}),e._v(" "),e.isView?e._e():t("DetailPanel",{ref:"detailPanel",attrs:{height:e.height,model:e.selectedModel,"read-only":"edit"!==e.mode,users:e.users,roles:e.roles,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase,"signal-defs":e.processModel.signalDefs,"message-defs":e.processModel.messageDefs,"on-change":function(t,a){e.onItemCfgChange(t,a)}}})],1)],1)},l=[],s=(a("8e6e"),a("456d"),a("55dd"),a("ade3")),i=(a("ac6a"),a("c5f6"),a("9d67")),o=a.n(i),r=a("e96b");a("7f7f");function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=a("a38e");function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Object(c["a"])(n.key),n)}}function p(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var m=a("503e"),f=a("e0ef"),v=a("3421"),g=function(){function e(){d(this,e)}return p(e,[{key:"getDefaultCfg",value:function(){return{_command:{zoomDelta:.1,queue:[],current:0,clipboard:[]}}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this;this._cfgs=this.getDefaultCfg(),this.list=[],this.queue=[],this.initCommands(),e.getCommands=function(){return t.get("_command").queue},e.getCurrentCommand=function(){var e=t.get("_command");return e.queue[e.current-1]},e.executeCommand=function(a,n){t.execute(a,e,n)},e.commandEnable=function(a){return t.enable(a,e)}}},{key:"registerCommand",value:function(e,t){if(this[e])m(this[e],t);else{var a=m({},{name:e,shortcutCodes:[],queue:!0,executeTimes:1,init:function(){},enable:function(){return!0},execute:function(e){this.snapShot=e.save(),this.selectedItems=e.get("selectedItems"),this.method&&(v(this.method)?e[this.method]():this.method(e))},back:function(e){e.read(this.snapShot),e.set("selectedItems",this.selectedItems)}},t);this[e]=a,this.list.push(a)}}},{key:"execute",value:function(e,t,a){var n=m({},this[e],a),l=this.get("_command");return n.enable(t)&&(n.init(),n.queue&&(l.queue.splice(l.current,l.queue.length-l.current,n),l.current++)),t.emit("beforecommandexecute",{command:n}),n.execute(t),t.emit("aftercommandexecute",{command:n}),n}},{key:"enable",value:function(e,t){return this[e].enable(t)}},{key:"destroyPlugin",value:function(){this._events=null,this._cfgs=null,this.list=[],this.queue=[],this.destroyed=!0}},{key:"initCommands",value:function(){var e=this;e.registerCommand("add",{enable:function(){return this.type&&this.addModel},execute:function(e){var t=e.add(this.type,this.addModel);1===this.executeTimes&&(this.addId=t.get("id"))},back:function(e){e.remove(this.addId)}}),e.registerCommand("update",{enable:function(){return this.itemId&&this.updateModel},execute:function(e){var t=e.findById(this.itemId);t&&(1===this.executeTimes&&(this.originModel=m({},t.getModel())),e.update(t,this.updateModel))},back:function(e){var t=e.findById(this.itemId);e.update(t,this.originModel)}}),e.registerCommand("delete",{enable:function(e){var t=e.getCurrentMode(),a=e.get("selectedItems");return"edit"===t&&a&&a.length>0},method:function(e){var t=e.get("selectedItems");e.emit("beforedelete",{items:t}),t&&t.length>0&&t.forEach((function(t){return e.remove(t)})),e.emit("afterdelete",{items:t})},shortcutCodes:["Delete","Backspace"]}),e.registerCommand("redo",{queue:!1,enable:function(t){var a=t.getCurrentMode(),n=e.get("_command");return"edit"===a&&n.current<n.queue.length},execute:function(t){var a=e.get("_command"),n=a.queue[a.current];n&&n.execute(t),a.current++},shortcutCodes:[["metaKey","shiftKey","z"],["ctrlKey","shiftKey","z"]]}),e.registerCommand("undo",{queue:!1,enable:function(t){var a=t.getCurrentMode();return"edit"===a&&e.get("_command").current>0},execute:function(t){var a=e.get("_command"),n=a.queue[a.current-1];n&&(n.executeTimes++,n.back(t)),a.current--},shortcutCodes:[["metaKey","z"],["ctrlKey","z"]]}),e.registerCommand("copy",{queue:!1,enable:function(e){var t=e.getCurrentMode(),a=e.get("selectedItems");return"edit"===t&&a&&a.length>0},method:function(t){var a=e.get("_command");a.clipboard=[];var n=t.get("selectedItems");if(n&&n.length>0){var l=t.findById(n[0]);l&&a.clipboard.push({type:l.get("type"),model:l.getModel()})}}}),e.registerCommand("paste",{enable:function(t){var a=t.getCurrentMode();return"edit"===a&&e.get("_command").clipboard.length>0},method:function(t){var a=e.get("_command");this.pasteData=f(a.clipboard[0]);var n=this.pasteData.model;n.x&&(n.x+=10),n.y&&(n.y+=10);var l=n.clazz,s=void 0===l?"userTask":l,i=(new Date).getTime(),o=s+i;n.id=o;var r=t.add(this.pasteData.type,n);r.toFront()}}),e.registerCommand("zoomIn",{queue:!1,enable:function(e){var t=e.getZoom(),a=e.get("maxZoom"),n=e.get("minZoom");return t<=a&&t>=n},execute:function(t){var a=e.get("_command"),n=t.get("maxZoom"),l=t.getZoom();this.originZoom=l;var s=l+a.zoomDelta;s>n&&(s=n),t.zoomTo(s)},back:function(e){e.zoomTo(this.originZoom)},shortcutCodes:[["metaKey","="],["ctrlKey","="]]}),e.registerCommand("zoomOut",{queue:!1,enable:function(e){var t=e.getZoom(),a=e.get("maxZoom"),n=e.get("minZoom");return t<=a&&t>=n},execute:function(t){var a=e.get("_command"),n=t.get("minZoom"),l=t.getZoom();this.originZoom=l;var s=l-a.zoomDelta;s<n&&(s=n),t.zoomTo(s)},back:function(e){e.zoomTo(this.originZoom)},shortcutCodes:[["metaKey","-"],["ctrlKey","-"]]}),e.registerCommand("resetZoom",{queue:!1,execute:function(e){var t=e.getZoom();this.originZoom=t,e.zoomTo(1)},back:function(e){e.zoomTo(this.originZoom)}}),e.registerCommand("autoFit",{queue:!1,execute:function(e){var t=e.getZoom();this.originZoom=t,e.fitView(5)},back:function(e){e.zoomTo(this.originZoom)}}),e.registerCommand("toFront",{queue:!1,enable:function(e){var t=e.get("selectedItems");return t&&t.length>0},execute:function(e){var t=e.get("selectedItems");if(t&&t.length>0){var a=e.findById(t[0]);a.toFront(),e.paint()}},back:function(e){}}),e.registerCommand("toBack",{queue:!1,enable:function(e){var t=e.get("selectedItems");return t&&t.length>0},execute:function(e){var t=e.get("selectedItems");if(t&&t.length>0){var a=e.findById(t[0]);a.toBack(),e.paint()}},back:function(e){}})}}])}(),h=g,y=a("1b95"),b=a("72fb"),_=a("14c8"),C=a("758e"),k=function(){function e(t){d(this,e),this._cfgs=y(this.getDefaultCfg(),t)}return p(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this;this.set("graph",e);var a=t.getEvents(),n={};b(a,(function(a,l){var s=_(t,a);n[l]=s,e.on(l,s)})),this._events=n,this.initEvents(),this.updateToolbar()}},{key:"getEvents",value:function(){return{afteritemselected:"updateToolbar",aftercommandexecute:"updateToolbar"}}},{key:"initEvents",value:function(){var e=this.get("graph"),t=this.get("container"),a=t.querySelectorAll("div > span[data-command]");b(a,(function(t,a){var n=t.getAttribute("data-command");t.addEventListener("click",(function(t){e.commandEnable(n)&&e.executeCommand(n)}))}))}},{key:"updateToolbar",value:function(){var e=this.get("graph"),t=this.get("container"),a=t.querySelectorAll("div > span[data-command]");b(a,(function(t,a){var n=t.getAttribute("data-command");e.commandEnable(n)?(C(t,{cursor:"pointer"}),C(t.children[0],{color:"#666"}),t.children[0].setAttribute("color","#666")):(C(t,{cursor:"default"}),C(t.children[0],{color:"#bfbfbf"}),t.children[0].setAttribute("color","#bfbfbf"))}))}},{key:"destroyPlugin",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}])}(),z=k,w=a("1b95"),T=a("72fb"),O=a("158c"),x=function(){function e(t){d(this,e),this._cfgs=w(this.getDefaultCfg(),t)}return p(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this.get("container"),a=O('<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="opacity:0"/>'),n=t.querySelectorAll("div > .el-collapse-item > .el-collapse-item__wrap > .el-collapse-item__content > img[data-item]");T(n,(function(t,n){var l=new Function("return "+t.getAttribute("data-item"))();t.addEventListener("dragstart",(function(t){t.dataTransfer.setDragImage(a,0,0),e.set("onDragAddNode",!0),e.set("addModel",l)})),t.addEventListener("dragend",(function(t){e.emit("canvas:mouseup",t),e.set("onDragAddNode",!1),e.set("addModel",null)}))}))}},{key:"destroy",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}])}(),D=x,A=a("1b95"),S=function(){function e(t){d(this,e),this._cfgs=A(this.getDefaultCfg(),t)}return p(e,[{key:"getDefaultCfg",value:function(){return{container:null}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"initPlugin",value:function(e){var t=this.get("container");t.addEventListener("dragover",(function(t){e.emit("canvas:mousemove",t)})),t.addEventListener("dragleave",(function(t){e.emit("canvas:mouseleave",t)}))}},{key:"destroy",value:function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)}}])}(),j=S,V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar"},[t("el-tooltip",{attrs:{content:e.i18n["tooltip.undo"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"undo"}},[t("span",{staticClass:"iconfont icon-undo"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.redo"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"redo"}},[t("span",{staticClass:"iconfont icon-redo"})])]),e._v(" "),t("span",{staticClass:"separator"}),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.copy"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"copy"}},[t("span",{staticClass:"iconfont icon-copy-o"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.paste"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"paste"}},[t("span",{staticClass:"iconfont icon-paster-o"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.delete"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"delete"}},[t("span",{staticClass:"iconfont icon-delete-o"})])]),e._v(" "),t("span",{staticClass:"separator"}),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomIn"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"zoomIn"}},[t("span",{staticClass:"iconfont icon-zoom-in-o"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomOut"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"zoomOut"}},[t("span",{staticClass:"iconfont icon-zoom-out-o"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.zoomReset"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"resetZoom"}},[t("span",{staticClass:"iconfont icon-actual-size-o"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.autoFit"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"autoFit"}},[t("span",{staticClass:"iconfont icon-fit"})])]),e._v(" "),t("span",{staticClass:"separator"}),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.toFront"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"toFront"}},[t("span",{staticClass:"iconfont icon-to-front"})])]),e._v(" "),t("el-tooltip",{attrs:{content:e.i18n["tooltip.toBack"],placement:"bottom"}},[t("span",{staticClass:"command",attrs:{"data-command":"toBack"}},[t("span",{staticClass:"iconfont icon-to-back"})])])],1)},P=[],B={inject:["i18n"]},I=B,N=(a("a0f5"),a("2877")),E=Object(N["a"])(I,V,P,!1,null,"12b37731",null),M=E.exports,R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemPanel",style:{height:e.height+"px"}},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:e.i18n["conventional"],name:"1"}},[t("img",{staticStyle:{width:"42px",height:"42px","margin-top":"10px"},attrs:{"data-item":"{clazz:'start',size:'30*30',label:''}",src:a("c5d6")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["startEvent"]))]),e._v(" "),t("img",{staticStyle:{width:"80px",height:"44px","margin-top":"10px"},attrs:{"data-item":e.userTaskData,src:a("1bb8")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["userTask"]))]),e._v(" "),t("img",{staticStyle:{width:"80px",height:"44px","margin-top":"10px"},attrs:{"data-item":e.handleNodeData,src:a("0636")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["handleNode"]))]),e._v(" "),t("img",{staticStyle:{width:"42px",height:"42px","margin-top":"10px"},attrs:{"data-item":"{clazz:'end',size:'30*30',label:''}",src:a("974b")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["endEvent"]))])]),e._v(" "),t("el-collapse-item",{attrs:{title:e.i18n["gateway"],name:"3"}},[t("img",{staticStyle:{width:"48px",height:"48px","margin-top":"10px"},attrs:{"data-item":"{clazz:'exclusiveGateway',size:'40*40',label:''}",src:a("2f27")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["exclusiveGateway"]))]),e._v(" "),t("img",{staticStyle:{width:"48px",height:"48px","margin-top":"10px"},attrs:{"data-item":"{clazz:'parallelGateway',size:'40*40',label:''}",src:a("2a9f4")}}),e._v(" "),t("div",[e._v(e._s(e.i18n["parallelGateway"]))])])],1)],1)},F=[],q={inject:["i18n"],props:{height:{type:Number,default:800}},data:function(){return{activeNames:["1","3"],userTaskData:"{clazz:'userTask',size:'80*44',label:'"+this.i18n["userTask"]+"'}",javaTaskData:"{clazz:'javaTask',size:'80*44',label:'"+this.i18n["javaTask"]+"'}",mailTaskData:"{clazz:'mailTask',size:'80*44',label:'"+this.i18n["mailTask"]+"'}",handleNodeData:"{clazz:'receiveTask',size:'80*44',label:'"+this.i18n["handleNode"]+"'}"}}},Z=q,G=(a("081c"),Object(N["a"])(Z,R,F,!1,null,null,null)),H=G.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"detailPanel",staticStyle:{"overflow-y":"auto","padding-bottom":"10px"},style:{height:e.height+"px"}},["userTask"===e.model.clazz?t("UserTaskDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,users:e.users,roles:e.roles,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"scriptTask"===e.model.clazz?t("ScriptTaskDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks}}):"receiveTask"===e.model.clazz?t("HandleNodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,users:e.users,roles:e.roles,groups:e.groups,departments:e.departments,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"gateway"===e.model.clazz||"exclusiveGateway"===e.model.clazz||"parallelGateway"===e.model.clazz||"inclusiveGateway"===e.model.clazz?t("GatewayDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}):"start"===e.model.clazz?t("StartEventDetail",{attrs:{model:e.model,users:e.users,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"end"===e.model.clazz?t("EndEventDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,tasks:e.tasks,templates:e.templates,"templates-base":e.templatesBase}}):"flow"===e.model.clazz?t("FlowDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}):e._e()],1)},K=[],L=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["userTask"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("之后任务：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.placeholder"],value:e.model.assignType,disabled:e.readOnly},on:{change:function(t){e.onChange("assignValue",[]),e.onChange("assignType",t),e.assignmentType()}}},[t("el-option",{key:"person",attrs:{value:"person",label:e.i18n["userTask.assignType.person"]}}),e._v(" "),t("el-option",{key:"role",attrs:{value:"role",label:e.i18n["userTask.assignType.role"]}}),e._v(" "),t("el-option",{key:"department",attrs:{value:"department",label:e.i18n["userTask.assignType.department"]}}),e._v(" "),t("el-option",{key:"variable",attrs:{value:"variable",label:e.i18n["userTask.assignType.variable"]}})],1)],1),e._v(" "),"person"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.person.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.person.placeholder"],disabled:e.readOnly,value:e.model.assignValue,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.users,(function(e){return t("el-option",{key:e.userId,attrs:{label:""===e.nickName?e.username:e.nickName,value:e.userId}})})),1)],1):"role"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.role.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.role.placeholder"],disabled:e.readOnly,multiple:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.roles,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleName,value:e.roleId}})})),1)],1):"department"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.department.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.department.placeholder"],value:e.model.assignValue,disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.departments,(function(e){return t("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1):"variable"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.variable.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.variable.placeholder"],disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.variableOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),t("div",{staticClass:"panelRow"},[t("el-checkbox",{attrs:{size:"small",disabled:"role"!==e.model.assignType&&"department"!==e.model.assignType&&(void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.activeOrder||e.readOnly),value:e.model.isCounterSign},on:{change:function(t){e.onChange("isCounterSign",t),e.initCounterSign(t)}}},[e._v(e._s(e.i18n["userTask.counterSign"]))]),e._v(" "),t("el-checkbox",{attrs:{size:"small",disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.isCounterSign||e.readOnly,value:e.model.activeOrder},on:{change:function(t){return e.onChange("activeOrder",t)}}},[e._v(e._s(e.i18n["userTask.activeOrder"]))]),e._v(" "),("role"===e.model.assignType||"department"===e.model.assignType)&&void 0!==e.model.assignValue&&null!==e.model.assignValue&&e.model.assignValue.length>=1&&e.model.isCounterSign?t("el-checkbox",{attrs:{size:"small",value:e.model.fullHandle},on:{change:function(t){return e.onChange("fullHandle",t)}}},[e._v(e._s(e.i18n["userTask.fullHandle"]))]):e._e()],1),e._v(" "),t("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"readonly-preview":!1,users:e.users}})],1)])},W=[],J=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["label"])+"：")]),e._v(" "),t("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{disabled:e.readOnly,value:e.model.label,size:"small"},on:{input:function(t){e.onChange("label",t)}}})],1),e._v(" "),t("div",{staticClass:"panelRow"},[e._m(0),e._v(" "),t("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",disabled:e.readOnly,value:e.model.sort},on:{input:function(t){e.onChange("sort",t)}}})],1),e._v(" "),t("div",{staticClass:"panelRow"},[t("el-checkbox",{attrs:{size:"small",disabled:e.readOnly,value:!!e.model.isHideNode},on:{change:function(t){return e.onChange("isHideNode",t)}}},[e._v("隐藏节点")]),e._v(" "),t("el-checkbox",{attrs:{size:"small",disabled:e.readOnly,value:!!e.model.hideIcon},on:{change:function(t){return e.onChange("hideIcon",t)}}},[e._v(e._s(e.i18n["hideIcon"]))])],1)])},U=[function(){var e=this,t=e._self._c;return t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 顺序：")])}],Q={inject:["i18n"],props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},X=Q,Y=Object(N["a"])(X,J,U,!1,null,null,null),ee=Y.exports,te=function(){var e=this,t=e._self._c;return t("div",[e.writePreview?t("div",{staticClass:"panelRow"},[t("div",[e._v("可写模版：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.writeTpls,multiple:!0,filterable:!0,size:"small"},on:{change:function(t){return e.onChange("writeTpls",t)}}},[e._l(e.templatesBase,(function(a,n){return[-1!==e.templates.indexOf(a.id)?t("el-option",{key:n,attrs:{label:a.name,value:a.id}}):e._e()]}))],2)],1):e._e(),e._v(" "),e.readonlyPreview?t("div",{staticClass:"panelRow"},[t("div",[e._v("只读模版：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.readonlyTpls,multiple:!0,filterable:!0,size:"small"},on:{change:function(t){return e.onChange("readonlyTpls",t)}}},[e._l(e.templatesBase,(function(a,n){return[-1!==e.templates.indexOf(a.id)?t("el-option",{key:n,attrs:{label:a.name,value:a.id}}):e._e()]}))],2)],1):e._e(),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("隐藏模版：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择模版",disabled:e.readOnly,value:e.model.hideTpls,multiple:!0,filterable:!0,size:"small"},on:{change:function(t){return e.onChange("hideTpls",t)}}},[e._l(e.templatesBase,(function(a,n){return[-1!==e.templates.indexOf(a.id)?t("el-option",{key:n,attrs:{label:a.name,value:a.id}}):e._e()]}))],2)],1),e._v(" "),e.ccPreview?t("div",{staticClass:"panelRow"},[t("div",[e._v("抄送邮件：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:"请选择抄送人",value:e.model.cc,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("cc",t),e.getPersons(t)}}},e._l(e.users,(function(e){return t("el-option",{key:e.userId,attrs:{label:""===e.nickName?e.username:e.nickName,value:e.userId}})})),1)],1):e._e()])},ae=[],ne={inject:["i18n"],props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}},writePreview:{type:Boolean,default:!0},readonlyPreview:{type:Boolean,default:!0},ccPreview:{type:Boolean,default:!0},users:{type:Array,default:function(){return[]}}}},le=ne,se=Object(N["a"])(le,te,ae,!1,null,null,null),ie=se.exports,oe={inject:["i18n"],components:{DefaultDetail:ee,NodeDetail:ie},props:{model:{type:Object,default:function(){return{}}},users:{type:Array,default:function(){return[]}},roles:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{variableOptions:[{value:1,label:"创建者"},{value:2,label:"创建者负责人"}],roleList:[]}},methods:{getPersons:function(e){(void 0===e||null===e||e.length<=1)&&(this.onChange("activeOrder",!1),this.onChange("isCounterSign",!1))},initCounterSign:function(e){e||this.onChange("fullHandle",!1)},assignmentType:function(){this.onChange("isCounterSign",!1)}}},re=oe,de=Object(N["a"])(re,L,W,!1,null,null,null),ce=de.exports,ue=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["scriptTask"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("类型：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务类型",disabled:e.readOnly,value:e.model.taskType},on:{change:function(t){return e.onChange("taskType",t)}}},[t("el-option",{attrs:{label:"任务",value:"task"}}),e._v(" "),t("el-option",{attrs:{label:"脚本",value:"script"}})],1)],1),e._v(" "),"script"===e.model.taskType?t("div",{staticClass:"panelRow"},[t("div",[e._v(e._s(e.i18n["scriptTask.script"])+"：")]),e._v(" "),t("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"输入脚本",type:"textarea",rows:4,disabled:e.readOnly,value:e.model.script},on:{input:function(t){e.onChange("script",t)}}})],1):e._e(),e._v(" "),"task"===e.model.taskType?t("div",{staticClass:"panelRow"},[t("div",[e._v("任务：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.full_name}})})),1)],1):e._e()],1)])},pe=[],me={inject:["i18n"],components:{DefaultDetail:ee},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},tasks:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1}}},fe=me,ve=Object(N["a"])(fe,ue,pe,!1,null,null,null),ge=ve.exports,he=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["handleNode"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("之后任务：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["handleNode.assignType.placeholder"],value:e.model.assignType,disabled:e.readOnly},on:{change:function(t){e.onChange("assignValue",[]),e.onChange("assignType",t),e.assignmentType()}}},[t("el-option",{key:"person",attrs:{value:"person",label:e.i18n["handleNode.assignType.person"]}}),e._v(" "),t("el-option",{key:"role",attrs:{value:"role",label:e.i18n["userTask.assignType.role"]}}),e._v(" "),t("el-option",{key:"department",attrs:{value:"department",label:e.i18n["handleNode.assignType.department"]}}),e._v(" "),t("el-option",{key:"variable",attrs:{value:"variable",label:e.i18n["handleNode.assignType.variable"]}})],1)],1),e._v(" "),"person"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType.person.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["handleNode.assignType.person.placeholder"],disabled:e.readOnly,value:e.model.assignValue,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.users,(function(e){return t("el-option",{key:e.userId,attrs:{label:""===e.nickName?e.username:e.nickName,value:e.userId}})})),1)],1):"role"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.role.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.role.placeholder"],disabled:e.readOnly,multiple:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.roles,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleName,value:e.roleId}})})),1)],1):"department"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["userTask.assignType.department.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["userTask.assignType.department.placeholder"],value:e.model.assignValue,disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}}},e._l(e.departments,(function(e){return t("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1):"variable"===e.model.assignType?t("div",{staticClass:"panelRow"},[t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "+e._s(e.i18n["handleNode.assignType.variable.title"])+"：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:e.i18n["handleNode.assignType.variable.placeholder"],disabled:e.readOnly,multiple:!0,filterable:!0},on:{change:function(t){e.onChange("assignValue",t),e.getPersons(t)}},model:{value:e.model.assignValue,callback:function(t){e.$set(e.model,"assignValue",e._n(t))},expression:"model.assignValue"}},e._l(e.variableOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),t("div",{staticClass:"panelRow"},[t("el-checkbox",{attrs:{size:"small",disabled:"role"!==e.model.assignType&&"department"!==e.model.assignType&&(void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.activeOrder||e.readOnly),value:e.model.isCounterSign},on:{change:function(t){e.onChange("isCounterSign",t),e.initCounterSign(t)}}},[e._v(e._s(e.i18n["handleNode.counterSign"]))]),e._v(" "),t("el-checkbox",{attrs:{size:"small",disabled:void 0===e.model.assignValue||null===e.model.assignValue||e.model.assignValue.length<=1||e.model.isCounterSign||e.readOnly,value:e.model.activeOrder},on:{change:function(t){return e.onChange("activeOrder",t)}}},[e._v(e._s(e.i18n["handleNode.activeOrder"]))]),e._v(" "),("role"===e.model.assignType||"department"===e.model.assignType)&&void 0!==e.model.assignValue&&null!==e.model.assignValue&&e.model.assignValue.length>=1&&e.model.isCounterSign?t("el-checkbox",{attrs:{size:"small",value:e.model.fullHandle},on:{change:function(t){return e.onChange("fullHandle",t)}}},[e._v(e._s(e.i18n["userTask.fullHandle"]))]):e._e()],1),e._v(" "),t("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"readonly-preview":!1,users:e.users}})],1)])},ye=[],be={inject:["i18n"],components:{DefaultDetail:ee,NodeDetail:ie},props:{model:{type:Object,default:function(){return{}}},users:{type:Array,default:function(){return[]}},roles:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{variableOptions:[{value:1,label:"创建者"},{value:2,label:"创建者负责人"}],roleList:[]}},methods:{getPersons:function(e){(void 0===e||null===e||e.length<=1)&&(this.onChange("activeOrder",!1),this.onChange("isCounterSign",!1))},initCounterSign:function(e){e||this.onChange("fullHandle",!1)},assignmentType:function(){this.onChange("isCounterSign",!1)}}},_e=be,Ce=Object(N["a"])(_e,he,ye,!1,null,null,null),ke=Ce.exports,ze=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s("exclusiveGateway"===e.model.clazz||"gateway"===e.model.clazz?e.i18n["exclusiveGateway"]:"parallelGateway"===e.model.clazz?e.i18n["parallelGateway"]:e.i18n["inclusiveGateway"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}})],1)])},we=[],Te={inject:["i18n"],components:{DefaultDetail:ee},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},Oe=Te,xe=Object(N["a"])(Oe,ze,we,!1,null,null,null),De=xe.exports,Ae=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["startEvent"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("之后任务：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0,size:"small"},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),t("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"write-preview":!1,users:e.users}})],1)])},Se=[],je={inject:["i18n"],components:{DefaultDetail:ee,NodeDetail:ie},props:{model:{type:Object,default:function(){return{}}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}}},Ve=je,Pe=Object(N["a"])(Ve,Ae,Se,!1,null,null,null),Be=Pe.exports,Ie=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["endEvent"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v("之后任务：")]),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{size:"small",placeholder:"选择任务",disabled:e.readOnly,value:e.model.task,multiple:!0,filterable:!0},on:{change:function(t){return e.onChange("task",t)}}},e._l(e.tasks,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.full_name}})})),1)],1),e._v(" "),t("NodeDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly,templates:e.templates,"templates-base":e.templatesBase,"write-preview":!1,"readonly-preview":!1,"cc-preview":!1}})],1)])},Ne=[],Ee={inject:["i18n"],components:{DefaultDetail:ee,NodeDetail:ie},props:{model:{type:Object,default:function(){return{}}},tasks:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}}},Me=Ee,Re=Object(N["a"])(Me,Ie,Ne,!1,null,null,null),Fe=Re.exports,qe=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-clazz":e.model.clazz}},[t("div",{staticClass:"panelTitle"},[e._v(e._s(e.i18n["sequenceFlow"]))]),e._v(" "),t("div",{staticClass:"panelBody"},[t("DefaultDetail",{attrs:{model:e.model,"on-change":e.onChange,"read-only":e.readOnly}}),e._v(" "),t("div",{staticClass:"panelRow"},[e._m(0),e._v(" "),t("el-select",{staticStyle:{width:"90%","font-size":"12px"},attrs:{placeholder:"选择流转属性",disabled:e.readOnly,value:e.model.flowProperties},on:{change:function(t){return e.onChange("flowProperties",t)}}},[t("el-option",{attrs:{label:"同意",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"拒绝",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"其他",value:"2"}})],1)],1),e._v(" "),t("div",{staticClass:"panelRow"},[t("el-checkbox",{attrs:{size:"small",disabled:e.readOnly,value:e.model.isExecuteTask},on:{change:function(t){return e.onChange("isExecuteTask",t)}}},[e._v("是否执行任务")])],1),e._v(" "),t("div",{staticClass:"panelRow"},[t("div",[e._v(e._s(e.i18n["sequenceFlow.expression"])+"：")]),e._v(" "),t("el-input",{staticStyle:{width:"90%","font-size":"12px"},attrs:{type:"textarea",rows:4,disabled:e.readOnly,value:e.model.conditionExpression},on:{input:function(t){e.onChange("conditionExpression",t)}}})],1)],1)])},Ze=[function(){var e=this,t=e._self._c;return t("div",[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 属性：")])}],Ge={inject:["i18n"],components:{DefaultDetail:ee},props:{model:{type:Object,default:function(){return{}}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1}}},He=Ge,$e=Object(N["a"])(He,qe,Ze,!1,null,null,null),Ke=$e.exports,Le={inject:["i18n"],components:{UserTaskDetail:ce,ScriptTaskDetail:ge,HandleNodeDetail:ke,GatewayDetail:De,StartEventDetail:Be,EndEventDetail:Fe,FlowDetail:Ke},props:{height:{type:Number,default:800},model:{type:Object,default:function(){return{}}},signalDefs:{type:Array,default:function(){return[]}},messageDefs:{type:Array,default:function(){return[]}},onChange:{type:Function,default:function(){}},readOnly:{type:Boolean,default:!1},users:{type:Array,default:function(){return[]}},roles:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}}},We=Le,Je=(a("438b"),Object(N["a"])(We,$,K,!1,null,null,null)),Ue=Je.exports,Qe=a("49da"),Xe=a("8de1"),Ye=a("e805"),et=a("1d16");function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}Object(Ye["a"])(o.a),Object(et["a"])(o.a);var nt={name:"WfdVue",components:{ToolbarPanel:M,ItemPanel:H,DetailPanel:Ue},provide:function(){return{i18n:Qe["a"][this.lang]}},props:{isView:{type:Boolean,default:!1},mode:{type:String,default:"edit"},height:{type:Number,default:800},lang:{type:String,default:"zh"},data:{type:Object,default:function(){return{nodes:[],edges:[]}}},users:{type:Array,default:function(){return[]}},roles:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},departments:{type:Array,default:function(){return[]}},tasks:{type:Array,default:function(){return[]}},templates:{type:Array,default:function(){return[]}},templatesBase:{type:Array,default:function(){return[]}}},data:function(){return{resizeFunc:function(){},selectedModel:{},previous:"",processModel:{id:"",name:"",clazz:"process",dataObjs:[],signalDefs:[],messageDefs:[]},graph:null,cmdPlugin:null}},watch:{data:function(e,t){e!==t&&this.graph&&(this.graph.changeData(this.initShape(t)),this.graph.setMode(this.mode),this.graph.emit("canvas:click"),this.cmdPlugin&&this.cmdPlugin.initPlugin(this.graph),this.isView&&this.graph.fitView(5))}},destroyed:function(){window.removeEventListener("resize",this.resizeFunc),this.graph.getNodes().forEach((function(e){e.getKeyShape().stopAnimate()}))},mounted:function(){var e=this,t=[];if(!this.isView){this.cmdPlugin=new h;var a=new z({container:this.$refs["toolbar"].$el}),n=new D({container:this.$refs["addItemPanel"].$el}),l=new j({container:this.$refs["canvas"]});t=[this.cmdPlugin,a,n,l]}var s=this.$refs["canvas"].offsetWidth;this.graph=new o.a.Graph({plugins:t,container:this.$refs["canvas"],height:this.height,width:s,modes:{default:["drag-canvas","clickSelected"],view:[],edit:["drag-canvas","hoverNodeActived","hoverAnchorActived","dragNode","dragEdge","dragPanelItemAddNode","clickSelected","deleteItem","itemAlign"]},defaultEdge:{shape:"flow-polyline-round"}}),this.graph.saveXML=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(Xe["a"])(e.graph.save(),e.processModel,t)},this.isView?this.graph.setMode("view"):this.graph.setMode(this.mode),this.graph.data(this.initShape(this.data)),this.graph.render(),this.isView&&this.data&&this.data.nodes&&this.graph.fitView(5),this.initEvents()},methods:{initShape:function(e){return e&&e.nodes?{nodes:e.nodes.map((function(e){return at({shape:Object(r["a"])(e.clazz)},e)})),edges:e.edges}:e},verifyProcess:function(e){if(void 0===e.label||null===e.label||""===e.label)return"标题不能为空";if(void 0===e.sort||null===e.sort||""===e.sort)return"顺序不能为空";if("userTask"===e.clazz||"receiveTask"===e.clazz){if(void 0===e.assignType||null===e.assignType||""===e.assignType)return"审批节点或处理节点的处理人类型不能为空";if(void 0===e.assignValue||null===e.assignValue||""===e.assignValue||0===e.assignValue.length)return"审批节点或处理节点的处理人不能为空"}return"flow"!==e.clazz||void 0!==e.flowProperties&&null!==e.flowProperties&&""!==e.flowProperties?"":"流转属性不能为空"},initEvents:function(){var e=this;this.graph.on("afteritemselected",(function(t){if(t&&t.length>0){if(""!==e.previous){var a="",n=e.graph.findById(e.previous[0]);if(void 0!==n){a=at({},n.getModel());var l=e.verifyProcess(a);if(""!==l)return e.selectedModel=a,void e.$message.error(l)}}var s=e.graph.findById(t[0]);e.selectedModel=at({},s.getModel()),e.previous=t}else""!==e.previous&&(e.selectedModel=e.processModel)}));var t=this.$refs["canvas"],a=this.graph,n=this.height-1;this.resizeFunc=function(){a.changeSize(t.offsetWidth,n)},window.addEventListener("resize",this.resizeFunc)},onItemCfgChange:function(e,t){var a="";if(a=0!==this.previous.length?[this.previous[0]]:this.graph.get("selectedItems"),a&&a.length>0){var n=this.graph.findById(a[0]);this.graph.executeCommand?this.graph.executeCommand("update",{itemId:a[0],updateModel:Object(s["a"])({},e,t)}):this.graph.updateItem(n,Object(s["a"])({},e,t)),this.selectedModel=at({},n.getModel())}else{var l=at(at({},this.processModel),{},Object(s["a"])({},e,t));this.selectedModel=l,this.processModel=l}}}},lt=nt,st=(a("951a"),a("c6bd"),Object(N["a"])(lt,n,l,!1,null,"275f6672",null));t["default"]=st.exports},c42e:function(e,t,a){},c5d6:function(e,t,a){e.exports=a.p+"static/web/img/start.f43f033b.svg"},c6bd:function(e,t,a){"use strict";a("96a7")},f187:function(e,t,a){},fa7b:function(e,t,a){}}]);